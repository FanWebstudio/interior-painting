---
import { colors } from '../../constants/theme';
import Button from '../ui/Button.astro';

const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/services', label: 'Services' },
  { href: '/transformation', label: 'Transformation' },
  { href: '/about', label: 'About' },
  { href: '/contact', label: 'Contact' },
];
---

<header
  class="fixed top-0 left-0 right-0 z-50 px-4 sm:px-6 lg:px-8 py-4 transition-all duration-300"
  id="main-header"
>
  <nav class="max-w-7xl mx-auto flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-2 lg:w-1/4">
      <i class="fa-solid fa-paint-roller text-[#F3752B] text-2xl"></i>
      <span class="text-[#0D0D0D] text-2xl font-medium">HomeMaster</span>
    </a>

    <!-- Mobile Menu Button -->
    <button type="button" class="lg:hidden text-[#0D0D0D]" aria-label="Toggle menu" data-toggle-nav>
      <i class="fa-solid fa-bars text-2xl"></i>
    </button>

    <!-- Navigation Links -->
    <div class="hidden lg:flex items-center justify-center gap-8 lg:w-2/4" data-nav-links>
      {
        navLinks.map(({ href, label }) => (
          <a href={href} class="text-[#0D0D0D] hover:text-[#F3752B] transition-colors">
            {label}
          </a>
        ))
      }
    </div>

    <!-- Get Quote Button -->
    <div class="hidden lg:flex justify-end lg:w-1/4">
      <a
        href="/quote"
        class="inline-flex items-center gap-2 px-6 py-3 bg-[#F3752B] text-white rounded-xl hover:bg-[#562A0E] transition-colors"
      >
        Get Quote
        <i class="fa-solid fa-arrow-right"></i>
      </a>
    </div>

    <!-- Mobile Menu -->
    <div
      class="hidden absolute top-full left-0 right-0 bg-white p-4 lg:hidden shadow-lg"
      data-nav-menu
    >
      <div class="flex flex-col gap-4">
        {
          navLinks.map(({ href, label }) => (
            <a href={href} class="text-[#0D0D0D] hover:text-[#F3752B] transition-colors">
              {label}
            </a>
          ))
        }
        <a
          href="/quote"
          class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-[#F3752B] text-white rounded-xl hover:bg-[#562A0E] transition-colors"
        >
          Get Quote
          <i class="fa-solid fa-arrow-right"></i>
        </a>
      </div>
    </div>
  </nav>
</header>

<!-- Spacer to prevent content from jumping when header becomes fixed -->
<div class="h-[72px]"></div>

<script>
  const header = document.getElementById('main-header');
  let lastScrollY = window.scrollY;

  // Function to update header styles based on scroll position
  const updateHeader = () => {
    const scrollY = window.scrollY;

    if (scrollY > 0) {
      header?.classList.add('bg-white', 'shadow-md');
    } else {
      header?.classList.remove('bg-white', 'shadow-md');
    }

    // Optional: Hide header on scroll down, show on scroll up
    if (scrollY > lastScrollY) {
      header?.classList.add('-translate-y-full');
    } else {
      header?.classList.remove('-translate-y-full');
    }

    lastScrollY = scrollY;
  };

  // Add scroll event listener
  window.addEventListener('scroll', () => {
    window.requestAnimationFrame(updateHeader);
  });

  // Handle mobile menu
  const toggleNav = document.querySelector('[data-toggle-nav]');
  const navMenu = document.querySelector('[data-nav-menu]');

  toggleNav?.addEventListener('click', () => {
    navMenu?.classList.toggle('hidden');
  });
</script>

<style>
  #main-header {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  #main-header.bg-white {
    background-color: rgba(255, 255, 255, 0.95);
  }
</style>
